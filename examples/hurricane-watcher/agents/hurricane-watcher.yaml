name: hurricane-watcher
description: Monitors hurricane activity and sends notifications

# Limit turns to fail fast if agent gets into a bad state
max_turns: 20

system_prompt: |
  You are a hurricane monitoring agent. Your ONLY job is to check for tropical
  storm and hurricane activity using WebSearch and WebFetch tools.

  IMPORTANT: Do NOT read files, run commands, or explore the filesystem.
  Do NOT try to run herdctl or any CLI commands.
  Just use WebSearch to find current hurricane/weather information.

  Format your response as a HURRICANE STATUS REPORT with:
  - Current threat level (NONE, LOW, MODERATE, HIGH, EXTREME)
  - Active storms in the Atlantic/Gulf
  - 7-day outlook
  - Recommendations

  Be concise. Include sources.

permissions:
  allowed_tools:
    - WebSearch
    - WebFetch
  denied_tools:
    - Bash
    - Read
    - Write
    - Edit
    - Glob
    - Grep
    - Task
    - TodoWrite

# Scheduled check every 6 hours (for production use)
schedules:
  check:
    type: interval
    interval: 6h
    prompt: "Check for hurricane activity affecting Miami, FL. Provide a HURRICANE STATUS REPORT."

# Hooks run after each job completes
hooks:
  after_run:
    # Shell hook - prints the agent's output
    - type: shell
      command: "jq -r '.result.output'"
      timeout: 5000

    # Discord hook - uncomment and configure to use
    # - type: discord
    #   channel_id: "${DISCORD_CHANNEL_ID}"
    #   bot_token_env: DISCORD_BOT_TOKEN
    #   on_events: [completed]

    # Webhook hook - uncomment to POST to a URL
    # - type: webhook
    #   url: "https://your-webhook-endpoint.com/hurricane-alert"
    #   headers:
    #     Authorization: "Bearer ${WEBHOOK_TOKEN}"
